# WeChat Writer Agent 测试用例与验证文档

本文档包含用于验证 wechat-writer agent 效果的测试用例和验证标准。

---

## 目录

1. [测试目标](#测试目标)
2. [测试用例](#测试用例)
3. [验证标准](#验证标准)
4. [测试流程](#测试流程)
5. [评分标准](#评分标准)
6. [常见问题](#常见问题)

---

## 测试目标

验证 wechat-writer agent 是否能够：

1. **风格一致性**：严格按照写作风格指南创作文章
2. **内容质量**：创作高质量、有价值的原创内容
3. **结构完整**：包含所有必要的章节和元素
4. **互动设计**：设计有效的互动引导和风险提示
5. **专业性**：兼顾专业性和可读性

---

## 测试用例

### 测试用例 1：金融科普文章

**任务描述**：
```
创作一篇关于"港股 IPO 配售规则新规"的科普文章，帮助普通投资者理解新规如何影响打新策略。
```

**输入信息**：
- 主题：港股 IPO 配售规则新规
- 目标受众：普通投资者
- 文章类型：科普文章
- 系列位置：独立文章（非系列）
- 预计字数：2000 字

**预期输出**：

1. **标题**：
   ```
   # 揭秘港股 IPO 新规：配售规则大调整，打新策略该如何应对？🧐
   ```

2. **结构**：
   - 开头引入：blockquote + 摘要 + 设问
   - 章节划分：01-04，每章有 emoji
   - 内容：新规解释 + 案例对比 + 投资建议
   - 结尾：总结 + 互动引导

3. **内容**：
   - 至少 2 个真实案例
   - 至少 3 个生动比喻
   - 可操作的打新建议
   - 明确的风险提示

4. **视觉元素**：
   - 至少 2 个图表（配售规则对比图）
   - 关键信息加粗
   - 使用引用块

5. **互动元素**：
   - 3-5 个话题标签
   - 免责声明
   - 作者信息
   - 点赞引导

**验证方法**：
- 对照写作风格指南逐项检查
- 与现有科普文章对比风格
- 检查是否有抄袭内容

---

### 测试用例 2：案例复盘文章

**任务描述**：
```
复盘 10 只 2025 年上市的新股，分析不同配售结构下的上市表现，总结规律和启示。
```

**输入信息**：
- 主题：新股上市表现复盘
- 目标受众：有经验的投资
- 文章类型：案例复盘
- 系列位置：Part 3（系列文章）
- 预计字数：2500 字

**预期输出**：

1. **标题**：
   ```
   # Part 3：2025 年新股大盘点：从 10 只 IPO 看配售结构与上市表现的隐藏规律 📊
   ```

2. **结构**：
   - 开头引入：blockquote + 系列导航 + 摘要
   - 章节划分：第一部分-第三部分，每部分有 emoji
   - 内容：案例分析 + 数据统计 + 规律总结
   - 结尾：总结 + 系列预告 + 互动引导

3. **内容**：
   - 10 个真实案例数据
   - 至少 3 个数据图表
   - 清晰的规律总结
   - 具体的投资建议

4. **视觉元素**：
   - 至少 3 个图表（数据统计图）
   - 多个表格（数据对比）
   - 数学公式（如适用）

5. **互动元素**：
   - 系列文章导航
   - 话题标签
   - 系列预告
   - 互动引导

**验证方法**：
- 检查数据准确性
- 验证案例真实性
- 对比现有复盘文章风格

---

### 测试用例 3：技术概念普及

**任务描述**：
```
将"超额配售选择权"这一金融概念转化为通俗易懂的科普文章，帮助零基础读者理解。
```

**输入信息**：
- 主题：超额配售选择权（绿鞋机制）
- 目标受众：零基础读者
- 文章类型：技术科普
- 系列位置：Part 0（前传）
- 预计字数：1800 字

**预期输出**：

1. **标题**：
   ```
   # 00 前传：深入理解港股 IPO 中的绿鞋机制 🧊
   ```

2. **结构**：
   - 开头引入：blockquote + 导航 + 摘要
   - 章节划分：01-05，每章有 emoji
   - 内容：概念解释 + 运作原理 + 实战场景
   - 结尾：总结 + 系列预告

3. **内容**：
   - 生活化的比喻（至少 3 个）
   - 简单的示例计算
   - 清晰的运作流程
   - 避免过度专业术语

4. **视觉元素**：
   - 至少 2 个流程图（运作流程）
   - 简单的数学公式
   - 形象的比喻图

5. **互动元素**：
   - 系列导航（预告后续）
   - 话题标签
   - 系列预告

**验证方法**：
- 检查概念解释是否通俗易懂
- 验证比喻是否贴切
- 测试零基础读者是否理解

---

### 测试用例 4：投资建议文章

**任务描述**：
```
基于最新市场数据，为投资者提供 2026 年港股打新策略建议，包括标的筛选、资金分配、风险控制。
```

**输入信息**：
- 主题：港股打新策略建议
- 目标受众：活跃投资者
- 文章类型：投资指南
- 系列位置：独立文章（非系列）
- 预计字数：2200 字

**预期输出**：

1. **标题**：
   ```
   # 2026 年港股打新指南：从标的筛选到风险控制的完整攻略 💡
   ```

2. **结构**：
   - 开头引入：blockquote + 摘要 + 风险提示
   - 章节划分：01-04，每章有 emoji
   - 内容：市场分析 + 策略建议 + 风险控制
   - 结尾：总结 + 互动引导

3. **内容**：
   - 市场数据支持的观点
   - 具体的操作建议（可量化）
   - 清晰的风险提示
   - 可执行的策略

4. **视觉元素**：
   - 至少 2 个图表（市场数据）
   - 策略对比表格
   - 风险控制流程图

5. **互动元素**：
   - 强烈的风险提示
   - 免责声明
   - 话题标签
   - 互动引导

**验证方法**：
- 检查建议是否可执行
- 验证风险提示是否充分
- 确认免责声明是否完整

---

## 验证标准

### 1. 风格一致性验证

**检查项目**：

| 检查项 | 通过标准 | 权重 |
|--------|----------|------|
| 标题格式 | 双标题 + emoji + 吸引关键词 | 10% |
| 章节编号 | 使用 01/02/03 或 第一/二/三部分 + emoji | 10% |
| 比喻使用 | 至少 2-3 个生动比喻 | 15% |
| 语言风格 | 口语化，避免学术化表达 | 15% |
| 专业术语 | 术语后给出通俗解释 | 10% |
| 数据支持 | 观点有数据或案例支持 | 15% |
| 可读性 | 通俗易懂，易于理解 | 10% |
| 格式规范 | Markdown 格式正确 | 5% |

**通过标准**：总分 ≥ 80 分

---

### 2. 内容质量验证

**检查项目**：

| 检查项 | 通过标准 | 权重 |
|--------|----------|------|
| 原创性 | 无抄袭内容，观点独立 | 20% |
| 准确性 | 数据准确，事实无误 | 25% |
| 深度 | 分析深入，有见解 | 25% |
| 价值性 | 对读者有实际价值 | 20% |
| 时效性 | 数据和案例有时效性 | 10% |

**通过标准**：总分 ≥ 80 分

---

### 3. 结构完整性验证

**检查项目**：

| 检查项 | 通过标准 | 权重 |
|--------|----------|------|
| 开头引入 | Blockquote + 导航/摘要 + 设问 | 15% |
| 章节划分 | 3-5 个章节，每章有 emoji | 20% |
| 内容组织 | 案例驱动，数据支持，层次分明 | 25% |
| 结尾设计 | 总结 + 升华 + 预告 + 互动 | 20% |
| 图表使用 | 至少 2-3 个图表，有说明 | 10% |
| 互动元素 | 标签 + 免责声明 + 作者信息 | 10% |

**通过标准**：总分 ≥ 80 分

---

### 4. 专业性验证

**检查项目**：

| 检查项 | 通过标准 | 权重 |
|--------|----------|------|
| 专业准确性 | 金融概念准确，无错误 | 30% |
| 平衡性 | 观点客观，不过度夸张 | 25% |
| 风险提示 | 有明确的风险提示 | 25% |
| 免责声明 | 有完整的免责声明 | 20% |

**通过标准**：总分 ≥ 80 分

---

## 测试流程

### 步骤 1：准备测试

1. 选择测试用例
2. 准备输入信息
3. 准备参考文档（写作风格指南、模板文件、现有文章）

### 步骤 2：执行测试

1. 调用 wechat-writer agent
2. 提供测试任务和输入信息
3. 等待 agent 生成文章

### 步骤 3：验证输出

1. **自动验证**（如果有脚本）：
   - 检查标题格式
   - 检查章节编号
   - 检查字数
   - 检查图表数量

2. **人工验证**：
   - 对照写作风格指南逐项检查
   - 与现有文章对比风格
   - 检查内容质量

### 步骤 4：评分与反馈

1. 根据验证标准逐项打分
2. 计算总分
3. 记录问题和建议
4. 生成测试报告

### 步骤 5：迭代优化

1. 根据测试结果调整 agent 配置
2. 重新测试
3. 直至所有验证通过

---

## 评分标准

### 综合评分计算

**综合评分 = 风格一致性 × 30% + 内容质量 × 30% + 结构完整性 × 20% + 专业性 × 20%**

### 评分等级

| 等级 | 分数范围 | 说明 |
|------|----------|------|
| **优秀** | 90-100 | 完全符合要求，可直接发布 |
| **良好** | 80-89 | 基本符合要求，少量修改后可发布 |
| **合格** | 70-79 | 部分符合要求，需要较多修改 |
| **不合格** | < 70 | 不符合要求，需要重新创作 |

### 测试通过标准

- **必须通过**：所有单项验证分数 ≥ 80 分
- **推荐通过**：综合评分 ≥ 85 分

---

## 常见问题

### Q1：如果 agent 生成的文章不符合风格怎么办？

**A**：
1. 检查输入信息是否完整清晰
2. 参考写作风格指南，提供更多风格要求
3. 使用文章模板作为参考
4. 重新调用 agent，并强调风格要求

### Q2：如何验证数据准确性？

**A**：
1. 检查数据来源是否注明
2. 与公开数据对比验证
3. 使用多个数据源交叉验证
4. 如有疑问，要求 agent 提供数据来源

### Q3：如何判断比喻是否贴切？

**A**：
1. 比喻要与内容相关
2. 读者容易理解
3. 不过度使用（1-2 个即可）
4. 避免不恰当的比喻

### Q4：如果测试不通过，如何优化 agent？

**A**：
1. 记录具体问题
2. 分析问题原因
3. 调整 agent 系统提示词
4. 增加更多示例
5. 重新测试验证

### Q5：如何确保文章原创性？

**A**：
1. 使用原创观点和案例
2. 避免直接复制现有文章内容
3. 使用查重工具检查
4. 引用时注明出处

---

## 测试报告模板

### 测试用例：[用例名称]

**测试时间**：YYYY-MM-DD
**测试人员**：[姓名]

#### 输入信息

- 主题：[主题]
- 目标受众：[受众]
- 文章类型：[类型]
- 系列位置：[位置]
- 预计字数：[字数]

#### 验证结果

| 验证项 | 得分 | 备注 |
|--------|------|------|
| 风格一致性 | XX/100 | [备注] |
| 内容质量 | XX/100 | [备注] |
| 结构完整性 | XX/100 | [备注] |
| 专业性 | XX/100 | [备注] |
| **综合评分** | **XX/100** | [备注] |

#### 问题记录

1. [问题描述]
2. [问题描述]
3. [问题描述]

#### 改进建议

1. [建议内容]
2. [建议内容]
3. [建议内容]

#### 测试结论

- [ ] 通过
- [ ] 不通过

---

## 附录

### 参考文档

1. **.claude/agents/wechat-writer.md** - WeChat Writer Agent 配置文件
2. **docs/writing-style-guide.md** - 写作风格指南
3. **templates/article-template.md** - 文章模板
4. **contents/finance/greenshoe/content/** - 参考文章（绿鞋机制系列）
5. **archives/wechat_backup/** - 微信公众号历史文章

### 测试工具

- **Markdown 检查工具**：检查 Markdown 格式是否正确
- **字数统计工具**：统计文章字数
- **查重工具**：检查文章原创性
- **图表检查工具**：验证图表链接是否有效

---

**文档版本**：1.0
**创建日期**：2026-02-08
**最后更新**：2026-02-08
**维护者**：wechat-writer agent
